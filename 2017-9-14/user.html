<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="telephone=no,email=no" name="format-detection" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>

    <!-- sys css -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="css/loading.css" rel="stylesheet" media="screen">
    <!-- Element-UI css -->
    <link rel="stylesheet" href="css/element-ui@1.3.3.css">

    <title>我的</title>
</head>
<body class="warpper-gray-3">

<!--
| ------------------------------------------
| user_page
| ------------------------------------------
| Here are user_page html
|
-->

<div id="user_page">

    <div class="loader">
        <div class="loader-content">
            <img src="images/loading_1.gif" alt="Loader" class="loader-loader wb15"/>
            <div class="clear h40px"></div>
            <p class="text-center" style="color: #999999 ">正在加载中...</p>
        </div>
    </div>

    <div class="wb100 warpper-black">

        <div class="clear1"></div>
        <div class="pa15 relative">

            <div style="padding-left: 74px">

                <template v-if="login">
                    <img src="images/head-default.png" class="fl h70px w70px radius50per bor-white bor-solid-2a absolute" style="left: 15px; top:0;">

                    <div class="Fwhite fl mal15 lh25px">
                       <p class="F18">{{user.nickName}}</p>
                       <p class="F14">{{user.customSigna ? user.customSigna : '暂无签名'}}</p>
                    </div>

                </template>

                <template v-else>
                    <img src="images/head-nologin.png" class="fl h70px w70px radius50per bor-white bor-solid-2a absolute" style="left: 15px; top:0;">

                    <a href="login.html" class="fl mal15 h40px lh40px mat5 text-center w80px warpper-white radius5 Fred">
                        请登录
                    </a>

                </template>

            </div>

            <div class="clear1"></div>
        </div>
    </div>

    <div class="wb100 warpper-white Fgray-3">
        <div class="h30px lh30px pat10 pab10">
            <a href="recharge.html">
                <div class="wb495 fl text-center Fgray-3">
                    余额： <span class="Fred Fnum">{{user.coinsQty ? user.coinsQty : 0}}</span> 金币
                </div>
            </a>
            <a href="user_red_bag.html">
                <div class="wb495 fr text-center bor-gray bor-solid-1l Fgray-3">
                    红包： <span class="Fred Fnum">{{user.couponQty ? user.couponQty : 0}}</span> 个
                </div>
            </a>
        </div>
    </div>

    <div class="clear1"></div>

    <div class="wb100 warpper-white">
        <div class="clear1"></div>
        <div class="wb100 text-center F14 lh20px">
            <a href="recharge.html">
                <div class="wb33333 fl Fgray-3">
                    <img src="images/icon-nav-new1.png" class="h35px">
                    <p>充值</p>
                </div>
            </a>
            <a href="user_ticket_all.html">
                <div class="wb33333 fl Fgray-3">
                    <img src="images/icon-nav-new3.png" class="h35px">
                    <p>我的竞猜</p>
                </div>
            </a>
            <a href="store.html">
                <div class="wb33333 fl Fgray-3">
                    <img src="images/icon-nav-new4.png" class="h35px">
                    <p>金币商城</p>
                </div>
            </a>
        </div>
        <div class="clear1"></div>
    </div>

    <div class="clear1"></div>

    <div class="wb100 warpper-white Fgray-3">
        <div class="clear"></div>
        <div class="h50px lh50px pal15">
            <a href="deal_all.html">
                <div class="wb100 bor-gray bor-solid-1b">
                    <span class="fl Fgray-3">账户明细</span>
                    <img src="images/arrow-right.png" class="fr h16px mal15 mar15" style="margin-top: 17px;">
                    <div class="clear"></div>
                </div>
            </a>
        </div>
        <div class="clear"></div>
        <div class="h50px lh50px pal15">
            <a href="user_fav.html">
                <div class="wb100 bor-gray bor-solid-1b">
                    <span class="fl Fgray-3">我的关注</span>
                    <img src="images/arrow-right.png" class="fr h16px mal15 mar15" style="margin-top: 17px;">
                    <div class="clear"></div>
                </div>
            </a>
        </div>
        <div class="clear1 warpper-gray-3"></div>

        <div class="h50px lh50px pal15" v-if="login">
            <a href="login.html">
                <div class="wb100">
                    <span class="fl Fgray-3">切换账号</span>
                    <img src="images/arrow-right.png" class="fr h16px mal15 mar15" style="margin-top: 17px;">
                    <div class="clear"></div>
                </div>
            </a>
        </div>

    </div>

    <div class="clear1"></div>

</div>

<!-- sys js -->
<script src="js/jquery-2.1.4.js"></script>
<!--<script src="js/jquery-1.8.3.min.js"></script>-->
<script src="js/vue.min.js"></script>
<!-- Element-UI js -->
<script src="js/element-ui@1.3.3.js"></script>
<script src="js/base.js"></script>
<script src="js/md5_ch.js"></script>
<script src="js/jquery.rotate.js"></script>
<script src="js/interface.js"></script>
<script src="js/loading.js"></script>

<script>

    'use strict';

    var vm = new Vue({
        el: "#user_page",
        data: {
            login: false,
            user: {}
        },
        methods: {
            toCash: function toCash() {
                if (!this.idCardBind) {
                    window.location.href = 'id_card_bind.html?call=true';
                    return false;
                }
                if (!this.pwdBind) {
                    window.location.href = 'set_pay_pwd.html?call=true';
                    return false;
                }

                window.location.href = 'cash.html?call=true';
            },
            twoDecimal: function twoDecimal(x) {
                var f = parseFloat(x);
                if (isNaN(f)) {
                    return false;
                }
                var f = Math.round(x * 100) / 100;
                var s = f.toString();
                var rs = s.indexOf('.');
                if (rs < 0) {
                    rs = s.length;
                    s += '.';
                }
                while (s.length <= rs + 2) {
                    s += '0';
                }
                return s;
            }
        },
        created: function created() {
            var _this = this;

            //- 判断登录
            baseAjax.userInfo(function (data) {
                var _user = data.returnJSON;

                if (base.isNull(_user)) {
                    //- 未登录
                    _this.login = false;
                } else {
                    _this.user = _user;

                    _this.login = true;
                    console.log(_this.user);
                }
            });
        }
    });

    $(function () {
        var isPageHide = false;
        window.addEventListener('pageshow', function () {
            if (isPageHide) {

                var _this = vm;

                baseAjax.userInfo(function (data) {
                    var _user = data.returnJSON;

                    if (base.isNull(_user)) {
                        //- 未登录
                        _this.login = false;
                    } else {
                        _this.user = _user;

                        _this.login = true;
                        console.log(_this.user);
                    }
                });

            }
        });
        window.addEventListener('pagehide', function () {
            isPageHide = true;
        });
    });

</script>

<div style="display: none">
    <script src="https://s13.cnzz.com/z_stat.php?id=1264319468&web_id=1264319468" language="JavaScript"></script>
</div>

</body>
</html>
