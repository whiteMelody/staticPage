<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>租车网</title>
<link href="css/base.css" rel="stylesheet" type="text/css">
<link href="css/zc.css" rel="stylesheet" type="text/css">
<script src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=bjqX5ex5mSepCvvIZTxdgozK"></script>
<style>
	body, html {width: 100%;height: 100%;}
	.map-area{ width:75%; height:90%; margin-top:2.5%; margin-left:5%; float:left; position:relative;}
	.right-area{ width:15%; height:90%; margin-top:2.5%; float:left; position:relative; background:#fff; border:1px solid #e1e1e1;}
	.right-ul li{ width:47%; border:1px solid #e1e1e1; float:left; background:#fefefe; color:#999; height:30px; line-height:30px; text-align:center; font-size:1.4em; cursor:pointer; margin:1%;}
	.right-ul li:hover{ border:1px solid #c0c0c0; float:left; background:#f9f9f9; color:#333;}
	.result-area li{}
	.close-btn{  -moz-border-radius:50%;-webkit-border-radius:50%;border-radius:50%; color:#fff; border:1px solid #e1e1e1; font-size:1.4em; cursor:pointer; position:relative; width:30px; height:30px; line-height:30px; text-align:center; float:right; margin-right:2.5%; margin-top:2.5%; background:#000;}
	.close-btn:hover{ border:1px solid #fff; color:#e1e1e1; background:#333;}
	.ul-page{ width:50%; margin:0 auto;}
	.ul-page li{ padding:0 10px; height:25px; line-height:25px; text-align:center; border:1px solid #e1e1e1; margin:0 5px; float:left; width:auto; cursor:pointer;}
	.ul-page .li-hover{ background:#359BE9; color:#fff;}
	.tangram-suggestion-main{ z-index:9999;}	
	</style>

</head>

<body>
	
    <div class="wb100 h40px warpper-blue">
    	<div class="w1000px center F125em lh40px">
        	<div class="wb30 fl">
            	<span class="fl Fwhite par3per pointer">重庆 [切换城市]</span>
                <a href="javascript:void(0)" class="white fl pal3per par3per">首页</a>
                <a href="javascript:void(0)" class="white fl pal3per par3per">包车</a>
                <a href="javascript:void(0)" class="white fl pal3per par3per">拼车</a>
            </div>
        	<div class="wb40 fr">
                <a href="javascript:void(0)" class="white fr pal3per">网站导航</a>
                <a href="javascript:void(0)" class="white fr pal3per par3per">帮助中心</a>
                <a href="javascript:void(0)" class="white fr pal3per par3per">我的租车</a>
                <a href="javascript:void(0)" class="white fr pal3per par3per">免费注册</a>
                <a href="javascript:void(0)" class="white fr pal3per par3per">登录</a>
            </div>
        </div>
        
    </div>
    
    <div class="wb100 h105px warpper-white-1">
    	<div class="w1000px center h80px pat10">
        	<div class="wb30 fl">
            	<img src="images/logo.png">
            </div>
            <div class="wb40 mal5per mar5per fl mat10 radius5 over-hidden">
            	<div class="wb85 fl warpper-white h35px">
                	<img src="images/icon-search.png" class="middle mal3per mar3per">
                    <input type="text" class="bor-none h35px h35px F125em Fgray-3" placeholder="请输入搜索关键字" />
                </div>
                <div class="wb15 fr warpper-yellow h35px lh35px Fwhite F125em text-center pointer">
                	搜索
                </div>
            </div>
            <div class="wb13 fr lh35px h35px text-center Fwhite warpper-orange-1 F150em mat10 radius5 pointer">
            	免费发布信息
            </div>
        </div>
        <div class="clear"></div>
        <div class="wb100 h15px warpper-wave"></div>
    </div>
    
    <div class="clear"></div>
   
    <div class="wb100">
    	<div class="w1000px h30px lh30px center Fgray-3 F125em">
        	<img src="images/icon-home.png" class="middle">
            <a href="javascript:void(0)" class="gray mal1per mar1per">首页</a>
            >
            <a href="javascript:void(0)" class="gray mal1per mar1per">拼车</a>
        </div>
    </div>
    
    <div class="clear1"></div>
    
    <div class="wb100">
    	<div class="w1000px center">
        	<div class="wb100 display-inline bor-gray bor-solid-1a radius5">
                <div class="wb18 fl Fwhite F150em text-center h50px lh40px" style="background:url(images/title-img-1.png) no-repeat; background-size:100% 100%; margin-left:-1%;">
                    <img src="images/icon-car-1.png" class="middle"> 拼车信息
                </div>
                <div class="wb83 fr h40px lh40px warpper-gray-1 bor-solid-2t bor-blue">
                    <span class="lh40px fr mar3per Fgray-3 F125em">为您找到<span class="Forange">416</span>条 包车信息</span>
                </div>
                <div class="clear1"></div>
                
                <div class="wb95 center F125em lh20px tips-area">
                	<div class="wb10 fl Fgray-3">
                    	类型：
                    </div>
                	<div class="wb90 fr">
                    	<span class="tips tips-hover">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    	<span class="tips">自驾</span>
                    </div>
                    <div class="clear1"></div>
                	<div class="wb25 fl Fgray-3">
                    	出发地：<input type="text" class="bor-gray bor-solid-1a radius5 h25px lh25px Fgray-3 wb60 pal3per" placeholder="重庆">
                    </div>
                	<div class="wb25 fl Fgray-3">
                    	目的地：<input type="text" class="bor-gray bor-solid-1a radius5 h25px lh25px Fgray-3 wb60 pal3per">
                    </div>
                	<div class="wb25 fl Fgray-3">
                    	出发时间：<input type="text" class="bor-gray bor-solid-1a radius5 h25px lh25px Fgray-3 wb60 pal3per">
                    </div>
                    
                    <input type="submit" class="fl wb10 warpper-blue h25px bor-none Fwhite radius5 pointer" value="搜索">
                	
                    <div class="clear1"></div>
               	</div>
            </div>
           
        </div>
        
        <div class="clear1"></div>
        
        <div class="w1000px center">
        	
            <div class="wb71 fl">
            	<div class="wb100">
                	<table class="wb100 table-list F125em Fgray-3">
                    	<thead>
                        	<tr>
                            	<td>类型 <img src="images/arrow-down.png" class="middle"></td>
                            	<td>出发日期</td>
                            	<td>费用</td>
                            	<td>车型</td>
                            	<td>出发地</td>
                            	<td>目地地</td>
                            	<td>申请人数</td>
                            	<td>操作</td>                                                              
                            </tr>
                        </thead>
                        <tbody>
                        	<tr>
                            	<td> <img src="images/icon-car.png" class="middle"> 车主</td>
                            	<td>03-03 晚上</td>
                            	<td><span class="Fgreen">面议</span></td>
                            	<td>轿车</td>
                            	<td>巴中</td>
                            	<td>东莞</td>
                            	<td>0</td>
                            	<td><a href="javascript:void(0)" class="blue">申请加入</a></td>                                                              
                            </tr>
                        	<tr>
                            	<td> <img src="images/icon-car.png" class="middle"> 车主</td>
                            	<td>03-03 晚上</td>
                            	<td>￥ 200.00</td>
                            	<td>轿车</td>
                            	<td>巴中</td>
                            	<td>东莞</td>
                            	<td>0</td>
                            	<td><a href="javascript:void(0)" class="blue">申请加入</a></td>                                                              
                            </tr>
                        	<tr>
                            	<td> <img src="images/icon-users.png" class="middle"> 乘客</td>
                            	<td>03-03 晚上</td>
                            	<td><span class="Fred">免费</span></td>
                            	<td>轿车</td>
                            	<td>巴中</td>
                            	<td>东莞</td>
                            	<td>0</td>
                            	<td><a href="javascript:void(0)" class="blue">申请加入</a></td>                                                              
                            </tr>
                        </tbody>
                    </table>
                	
                </div>
                <div class="clear1"></div>
                
                <div class="wb50 center">
                	<div class="wb7 h25px lh25px F150em pointer text-center bor-gray bor-solid-1a Fblue fl mal2per mar2per"><</div>
                	<div class="wb7 h25px lh25px F150em pointer text-center bor-gray bor-solid-1a Fblue fl mal2per mar2per">1</div>
                	<div class="wb7 h25px lh25px F150em pointer text-center bor-gray bor-solid-1a Fblue fl mal2per mar2per">2</div>
                	<div class="wb7 h25px lh25px F150em pointer text-center bor-gray bor-solid-1a Fblue fl mal2per mar2per">3</div>
                	<div class="wb7 h25px lh25px F150em pointer text-center bor-gray bor-solid-1a Fblue fl mal2per mar2per">></div>
                </div>
                
            </div>
        
        	<div class="wb275 fr ">
				<div class="wb100 h265px img-area pointer relative map-btn" id="map-small"></div>
                <div class="clear1"></div>
                
                <div class="wb100 bor-gray bor-solid-1a">
                    <div class="wb90 center pat15 pab15 F125em Fgray-3 lh20px">
                    	<div class="wb30 fl">
                        	热门出发：
                        </div>
                        <div class="wb65 fr">
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        </div>
                        <div class="clear1"></div>
                    	<div class="wb30 fl">
                        	热门到达：
                        </div>
                        <div class="wb65 fr">
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        	<p class="wb45 fl"><a href="javascript:void(0)" class="blue"> 北京 </a>(11)</p>
                        </div>
                        <div class="clear1"></div>
                    	<div class="wb30 fl">
                        	热门路线：
                        </div>
                        <div class="wb65 fr">
                        	<p class="wb95 fl"><a href="javascript:void(0)" class="blue"> 北京到重庆 </a></p>
                        	<p class="wb95 fl"><a href="javascript:void(0)" class="blue"> 北京到重庆 </a></p>
                        	<p class="wb95 fl"><a href="javascript:void(0)" class="blue"> 北京到重庆 </a></p>
                        	<p class="wb95 fl"><a href="javascript:void(0)" class="blue"> 北京到重庆 </a></p>
                        </div>
                        <div class="clear1"></div>
                    	<div class="wb30 fl">
                        	热门路线：
                        </div>
                        <div class="wb65 fr lh25px">
                        	<p class="wb85 bor-gray bor-solid-1a radius5 fl text-center mab5"><a href="javascript:void(0)" class="blue"> 按出发城市排序>> </a></p>
                        	<p class="wb85 bor-gray bor-solid-1a radius5 fl text-center mab5"><a href="javascript:void(0)" class="blue"> 按出发城市排序>> </a></p>
                        	<p class="wb85 bor-gray bor-solid-1a radius5 fl text-center mab5"><a href="javascript:void(0)" class="blue"> 按出发城市排序>> </a></p>
                        </div>
                        <div class="clear"></div>
                    	
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
    
    
        
    <div style="background:rgba(0,0,0,.5); width:100%; height:100%; z-index:10; position:fixed; top:0; display:none;" id="dialog-area">
        <div class="close-btn">X</div>
        <div id="map-area" class="map-area"></div>
        <div class="right-area">
            <ul class="right-ul">
                <li>酒店</li>
                <li>餐厅</li>
                <li>地铁</li>
                <li>娱乐</li>
                <li>景点</li>
                <li>商场</li>
            </ul>
            
            <div class="clear1"></div>
            <div id="r-result" class="F125em Fgray-3 wb97 center">关键字:<input type="text" id="suggestId" size="20" class="Fgray-3 h25px lh25px pal10 text-left bor-gray bor-solid-1a radius5 mal5" style="width:215px;"/></div>
            <div id="searchResultPanel" style="border:1px solid #C0C0C0;width:150px;height:auto; display:none; position:relative; z-index:9999;"></div>

            <div class="clear1"></div>
            <div class="result-area" id="result-area"></div>
        </div>
    </div>
    
    
    <div class="clear1"></div>
    <div class="clear1 bor-blue bor-solid-2b"></div>
    <div class="clear1"></div>
    <div class="clear1"></div>
    <div class="wb100">
    	<div class="w1000px center text-center">
        	<img src="images/bottom-img-1.png">
            <div class="clear1"></div>
            <div class="clear1 bor-gray bor-solid-1b"></div>
            <div class="clear1"></div>
            <div class="wb96 pal2per par2per Fgray-3 lh25px text-left F110em">
            	<div class="wb20 fl">
                	<p class="F175em">新手指南</p>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                </div>
            	<div class="wb20 fl">
                	<p class="F175em">新手指南</p>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                </div>
            	<div class="wb20 fl">
                	<p class="F175em">新手指南</p>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                </div>
            	<div class="wb20 fl">
                	<p class="F175em">新手指南</p>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                </div>
            	<div class="wb20 fl">
                	<p class="F175em">新手指南</p>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                    <a href="javascript:void(0)" class="gray wb100 fl">注册新用户</a>
                </div>
            </div>
            <div class="clear1"></div>
            <div class="clear1 bor-gray bor-solid-1b"></div>
            <div class="clear1"></div>
            <div class="wb70 fl Fgray-3 text-left lh25px F125em">
            	<p>
                	<a href="javascript:void(0)" class="gray fl">关于租车网</a>
                    <span class="fl mal3per mar3per">|</span>
                	<a href="javascript:void(0)" class="gray fl">招募英才</a>
                    <span class="fl mal3per mar3per">|</span>
                	<a href="javascript:void(0)" class="gray fl">帮助中心</a>
                    <span class="fl mal3per mar3per">|</span>
                	<a href="javascript:void(0)" class="gray fl">联系我们</a>
                    <span class="fl mal3per mar3per">|</span>
                	<a href="javascript:void(0)" class="gray fl">友情链接</a>
                    <span class="fl mal3per mar3per">|</span>
                	<a href="javascript:void(0)" class="gray fl">投诉通道：400-821-1608</a>
                </p>
                <div class="clear"></div>
                <p>Copyright © 2007-2015 租车网信息技术服务有限公司 ICP证：沪B2-20140130</p>
                
            </div>
            
            <div class="wb25 fr"></div>
            
        </div>
    </div>
    <script>
    	var map,map2,prevCircle,myValue;

		//var tempImg = $("input[name=thumb]").val();
		//var tempPt = $("input[name=map]").val();
		//100.226815,25.597629
		var tempImg = "images/zb.gif";
		var tempPt = "100.226815,25.597629";
		
		$(function(){
		
			
			$(".close-btn").click(function(){
				$("#dialog-area").hide(0);
			})
			
			$("#wrapper-area").click(function(){
				$("#wrapper-area").fadeOut();
				$("#wrapper").fadeOut();	
			})
			
			
			$(".map-btn").click(function(){
				$("#dialog-area").show(0);
				
				if(map){
					
				}else{
					map = new BMap.Map("map-area");
					var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
					var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
					var top_right_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL}); //右上角，仅包含平移和缩放按钮
					/*缩放控件type有四种类型:
					BMAP_NAVIGATION_CONTROL_SMALL：仅包含平移和缩放按钮；BMAP_NAVIGATION_CONTROL_PAN:仅包含平移按钮；BMAP_NAVIGATION_CONTROL_ZOOM：仅包含缩放按钮*/
				
					map.addControl(top_left_control);        
					map.addControl(top_left_navigation);     
					map.addControl(top_right_navigation);    
					map.enableScrollWheelZoom();   //启用滚轮放大缩小，默认禁用
					map.enableContinuousZoom();    //启用地图惯性拖拽，默认禁用
					
					myPoint();
				}
			})
			
			$(".right-area li").click(function(){
				
				var allOverlaya = map.getOverlays();
				
				for (var i = 0; i <= allOverlaya.length; i++){
					map.removeOverlay(allOverlaya[i]);
				}
				
				myPoint();
				
				var mPoint = new BMap.Point(tempPt.split(",")[0],tempPt.split(",")[1]);
				var circle = new BMap.Circle(mPoint,1000,{fillColor:"blue", strokeWeight: 1 ,fillOpacity: 0.3, strokeOpacity: 0.3});
				if(prevCircle)
					prevCircle.remove();
				prevCircle = circle;
				
				map.addOverlay(circle);
				var local =  new BMap.LocalSearch(map, {renderOptions: {map: map, autoViewport: false}});  
				var bounds = getSquareBounds(circle.getCenter(),circle.getRadius());
				
				var local = new BMap.LocalSearch(map, {
					renderOptions: {map: map, panel: "result-area"},pageCapacity: 7
				});
				
				local.searchInBounds($(this).text(),bounds); 
			})
		
			
			map2 = new BMap.Map("map-small");
			
			var point2 = new BMap.Point(tempPt.split(",")[0],tempPt.split(",")[1]);
			map2.centerAndZoom(point2, 15);
			var pt2 = new BMap.Point(tempPt.split(",")[0],tempPt.split(",")[1]);
			var myIcon2 = new BMap.Icon( tempImg, new BMap.Size(36,48));
			var marker3 = new BMap.Marker(pt2,{icon:myIcon2}); 
			map2.addOverlay(marker3);            
			map2.centerAndZoom(point2, 15);	
		
			
			var ac = new BMap.Autocomplete(    //建立一个自动完成的对象
				{"input" : "suggestId"
				,"location" : map2
			});
		
			ac.addEventListener("onhighlight", function(e) {  //鼠标放在下拉列表上的事件
			var str = "";
				var _value = e.fromitem.value;
				var value = "";
				if (e.fromitem.index > -1) {
					value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
				}    
				str = "FromItem<br />index = " + e.fromitem.index + "<br />value = " + value;
				
				value = "";
				if (e.toitem.index > -1) {
					_value = e.toitem.value;
					value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
				}    
				str += "<br />ToItem<br />index = " + e.toitem.index + "<br />value = " + value;
				G("searchResultPanel").innerHTML = str;
			});
		
			
			ac.addEventListener("onconfirm", function(e) {    //鼠标点击下拉列表后的事件
			var _value = e.item.value;
				myValue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
				G("searchResultPanel").innerHTML ="onconfirm<br />index = " + e.item.index + "<br />myValue = " + myValue;
				
				setPlace();
			});

	
		
		});
		
		/**
		 * 得到圆的内接正方形bounds
		 * @param {Point} centerPoi 圆形范围的圆心
		 * @param {Number} r 圆形范围的半径
		 * @return 无返回值   
		 */ 
		function getSquareBounds(centerPoi,r){
			var a = Math.sqrt(2) * r; //正方形边长
		  
			mPoi = getMecator(centerPoi);
			var x0 = mPoi.x, y0 = mPoi.y;
		 
			var x1 = x0 + a / 2 , y1 = y0 + a / 2;//东北点
			var x2 = x0 - a / 2 , y2 = y0 - a / 2;//西南点
			
			var ne = getPoi(new BMap.Pixel(x1, y1)), sw = getPoi(new BMap.Pixel(x2, y2));
			return new BMap.Bounds(sw, ne);        
			
		}
		//根据球面坐标获得平面坐标。
		function getMecator(poi){
			return map.getMapType().getProjection().lngLatToPoint(poi);
		}
		//根据平面坐标获得球面坐标。
		function getPoi(mecator){
			return map.getMapType().getProjection().pointToLngLat(mecator);
		}
		
		function myPoint(){
			var point = new BMap.Point(tempPt.split(",")[0],tempPt.split(",")[1]);
			map.centerAndZoom(point, 15);
			var pt = new BMap.Point(tempPt.split(",")[0],tempPt.split(",")[1]);
			var myIcon = new BMap.Icon( tempImg, new BMap.Size(36,48));
			var marker2 = new BMap.Marker(pt,{icon:myIcon}); 
			map.addOverlay(marker2);            
			map.centerAndZoom(point, 15);	
		}
		function setPlace(){
			map.clearOverlays();    //清除地图上所有覆盖物
			function myFun(){
				var pp = local.getResults().getPoi(0).point;    //获取第一个智能搜索的结果
				map.centerAndZoom(pp, 18);
				var myIcon = new BMap.Icon( tempImg, new BMap.Size(36,48));
				map.addOverlay(new BMap.Marker(pp,{icon:myIcon}));    //添加标注

			}
			var local = new BMap.LocalSearch(map, { //智能搜索
			  onSearchComplete: myFun
			});
			local.search(myValue);
		}		
				// 百度地图API功能
		function G(id) {
			return document.getElementById(id);
		}

	
    </script>
</body>
</html>

